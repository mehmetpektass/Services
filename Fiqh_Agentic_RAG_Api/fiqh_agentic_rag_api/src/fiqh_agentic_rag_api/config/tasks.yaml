search_task:
  description: >
    Chat History: "{chat_history}"
    Current Question: "{question}"
    
    Search for Islamic sources related to this question.
    If NO relevant sources exist, return: "❌ KAYNAK BULUNAMADI"
    
  expected_output: >
    Either: (a) Source texts, OR (b) "❌ KAYNAK BULUNAMADI"
    
  agent: db_researcher

writing_task:
  description: >
    Chat History: "{chat_history}"
    Current Question: "{question}"
    
    **CRITICAL INSTRUCTION:**
    IF the researcher returned "❌ KAYNAK BULUNAMADI" or "No sources found":
    → Your answer MUST be: "Bu konuda kaynaklarda yeterli bilgi bulunmamadı. Modern konular veya çok spesifik durumlar için yerel bir İslam alimi veya güvenilir fetva hizmeti ile görüşmeniz önerilir."
    → DO NOT use your training knowledge
    → DO NOT fabricate any ruling
    
    IF sources were provided:
    → Answer based ONLY on those sources (~100 words)
    → Use natural Turkish paragraph form
    → Do NOT create lists unless absolutely necessary
    → Mention sources briefly at the end if relevant
    
  expected_output: >
    Either: (a) Source-based paragraph answer, OR (b) "No information available" message
    
  agent: fiqh_writer

review_task:
  description: >
    Validate the writer's answer for hallucination ONLY.
    
    **YOUR ONLY TASK:**
    Check if answer contains fabricated madhabs, scholars, or councils NOT in sources.
    
    **IF NO HALLUCINATION DETECTED:**
    → Return the writer's answer EXACTLY AS IS
    → Do NOT modify, restructure, or add anything
    → Do NOT add your own explanations
    
    **IF HALLUCINATION DETECTED:**
    → Return: "Bu konuda kaynaklarda yeterli bilgi bulunamadı."
    
    **CRITICAL:** You are an approval gate, NOT an editor. Pass through good answers unchanged.
    
  expected_output: >
    Writer's answer (unmodified if good) OR rejection message (if hallucination)
    
  agent: content_reviewer